<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SolbergTech</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">

    <nav class="nav">
      <div class="brand">
        <img src="Solbergtech-Logo.png" alt="SolbergTech logo" class="nav-logo">
      </div>
    </nav>

    <header class="hero">
      <p class="subtitle">Industriell automasjon, PLS/SCADA og fjernovervåking</p>
    </header>

    <section class="hero-visual">
      <img src="automation-illustration.png"
           alt="Industriell automasjon med PLS, HMI og SCADA">
    </section>

    <section id="om">
      <h2>Om SolbergTech</h2>
      <p>
        SolbergTech leverer robuste og driftssikre løsninger innen industriell automasjon,
        med fokus på PLS-systemer, SCADA og sikker fjernovervåking.
      </p>
    </section>

    <section id="tjenester">
      <h2>Tjenester</h2>
      <div class="cards">
        <div class="card">PLS-programmering</div>
        <div class="card">Idriftsettelse</div>
        <div class="card">Fjernovervåking (4G/VPN)</div>
      </div>
    </section>

    <section id="status">
      <h2>Status</h2>
      <p>Temperatur: <strong id="tempValue">–</strong> °C</p>
      <p class="small">Sist oppdatert: <span id="tempTime">–</span></p>
    </section>

    <footer id="kontakt">
      <p>
        Kontakt:
        <a href="mailto:post@solbergtech.no">post@solbergtech.no</a>
      </p>
    </footer>

  </div>

  <script>
    async function loadTemperature() {
      const url = "https://api.solbergtech.no/temperature";
      try {
        const res = await fetch(url, { cache: "no-store" });
        if (!res.ok) throw new Error("HTTP " + res.status);
        const data = await res.json();

        document.getElementById("tempValue").textContent =
          (typeof data.temperature_c === "number") ? data.temperature_c.toFixed(1) : "–";

        document.getElementById("tempTime").textContent =
          data.ts_unix ? new Date(data.ts_unix * 1000).toLocaleString("no-NO") : "–";

      } catch (e) {
        document.getElementById("tempValue").textContent = "utilgjengelig";
        document.getElementById("tempTime").textContent = "–";
      }
    }

    loadTemperature();
    setInterval(loadTemperature, 60_000);
  </script>
</body>
</html>
